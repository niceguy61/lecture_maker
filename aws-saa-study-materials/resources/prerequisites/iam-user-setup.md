# IAM 사용자 설정 가이드

## 📋 개요

이 가이드는 일상적인 AWS 작업을 위한 관리자 권한 IAM 사용자를 생성하는 과정을 안내합니다. AWS 보안 베스트 프랙티스에 따라 루트 계정 대신 IAM 사용자를 사용하여 AWS 서비스를 관리합니다.

## 🎯 학습 목표

- IAM(Identity and Access Management) 개념 이해
- 관리자 권한을 가진 IAM 사용자 생성
- IAM 사용자 로그인 방법 학습
- IAM 보안 베스트 프랙티스 적용

## ⏱️ 예상 소요 시간

약 15-20분

## 💰 예상 비용

$0.00 (IAM 서비스는 무료)

## 📚 사전 요구사항

- ✅ [AWS 계정 설정](./aws-account-setup.md) 완료
- ✅ 루트 계정으로 AWS Management Console 로그인 가능

---

## 🔑 IAM이란?

### Identity and Access Management (IAM)

AWS IAM은 AWS 리소스에 대한 액세스를 안전하게 제어할 수 있는 서비스입니다.

### 주요 개념

- **사용자(User)**: AWS를 사용하는 개인 또는 애플리케이션
- **그룹(Group)**: 사용자들의 집합
- **역할(Role)**: AWS 서비스나 애플리케이션에 부여하는 권한
- **정책(Policy)**: 권한을 정의하는 JSON 문서

### 왜 IAM 사용자를 만들어야 하나요?

#### ✅ 보안 강화
- 루트 계정은 모든 권한을 가지므로 해킹 시 위험
- IAM 사용자는 필요한 권한만 부여 가능

#### ✅ 책임 추적
- 각 사용자의 작업을 개별적으로 추적
- CloudTrail로 누가 무엇을 했는지 감사 가능

#### ✅ 권한 관리
- 사용자별로 다른 권한 부여 가능
- 필요 없어진 권한은 즉시 제거 가능

---

## 1️⃣ 관리자 IAM 사용자 생성

### Step 1: IAM 서비스 접속

1. **루트 계정**으로 [AWS Management Console](https://console.aws.amazon.com/) 로그인
2. 상단 검색창에 **"IAM"** 입력
3. **IAM** 서비스 선택

### Step 2: 사용자 생성 시작

1. 좌측 메뉴에서 **"사용자"** 클릭
2. **"사용자 생성"** 버튼 클릭

### Step 3: 사용자 세부 정보 지정

#### 사용자 이름 입력

1. **사용자 이름**: `admin-user` 입력
   - 또는 본인의 이름 사용 (예: `john-admin`)
   - 영문, 숫자, 하이픈(-), 밑줄(_)만 사용 가능

#### AWS Management Console 액세스 설정

1. ✅ **"사용자에게 AWS Management Console에 대한 액세스 권한 제공"** 체크

2. **"IAM 사용자를 생성하고 싶음"** 선택

3. **콘솔 암호** 설정:
   - **"사용자 지정 암호"** 선택
   - 강력한 암호 입력 (최소 8자, 대소문자, 숫자, 특수문자 포함)
   - 예: `MyAdmin@2024!Secure`

4. **"사용자는 다음 로그인 시 새 암호를 생성해야 합니다"** 옵션:
   - ✅ 체크 (권장) - 첫 로그인 시 암호 변경 강제
   - 또는 체크 해제 - 설정한 암호 계속 사용

5. **"다음"** 버튼 클릭

### Step 4: 권한 설정

#### 권한 옵션 선택

1. **"직접 정책 연결"** 선택

#### 관리자 정책 연결

1. 검색창에 **"AdministratorAccess"** 입력
2. ✅ **"AdministratorAccess"** 정책 체크
   - 이 정책은 모든 AWS 서비스에 대한 전체 액세스 권한 부여
   - 학습 목적으로는 적합하지만, 프로덕션 환경에서는 최소 권한 원칙 적용 필요

3. **"다음"** 버튼 클릭

> 💡 **참고**: AdministratorAccess는 루트 계정과 거의 동일한 권한을 부여하지만, 계정 설정 변경 등 일부 작업은 여전히 루트 계정이 필요합니다.

### Step 5: 검토 및 생성

1. **사용자 세부 정보** 확인:
   - 사용자 이름: `admin-user`
   - AWS Management Console 액세스: 활성화됨
   - 권한: AdministratorAccess

2. **"사용자 생성"** 버튼 클릭

### Step 6: 로그인 정보 저장

#### 중요 정보 확인

생성 완료 화면에서 다음 정보를 확인하고 안전하게 저장하세요:

1. **콘솔 로그인 URL**
   - 형식: `https://[계정ID].signin.aws.amazon.com/console`
   - 또는: `https://[계정별칭].signin.aws.amazon.com/console`
   - 예: `https://123456789012.signin.aws.amazon.com/console`

2. **사용자 이름**: `admin-user`

3. **콘솔 암호**: 설정한 암호

#### 정보 다운로드 (선택사항)

1. **".csv 파일 다운로드"** 버튼 클릭
   - 로그인 정보가 포함된 CSV 파일 다운로드
   - 안전한 장소에 보관

2. **"이메일 전송"** 버튼 클릭 (선택사항)
   - 로그인 정보를 이메일로 전송

> ⚠️ **보안 주의**: CSV 파일과 이메일에는 민감한 정보가 포함되어 있습니다. 안전하게 보관하고, 필요 없어지면 삭제하세요.

---

## 2️⃣ IAM 사용자로 로그인

### Step 1: 루트 계정 로그아웃

1. 우측 상단 계정 이름 클릭
2. **"로그아웃"** 선택

### Step 2: IAM 사용자 로그인

1. 저장한 **콘솔 로그인 URL**로 이동
   - 예: `https://123456789012.signin.aws.amazon.com/console`

2. **IAM 사용자 로그인** 화면에서:
   - **계정 ID 또는 별칭**: 자동으로 입력되어 있음
   - **IAM 사용자 이름**: `admin-user` 입력
   - **암호**: 설정한 암호 입력

3. **"로그인"** 버튼 클릭

### Step 3: 암호 변경 (첫 로그인 시)

"사용자는 다음 로그인 시 새 암호를 생성해야 합니다" 옵션을 선택한 경우:

1. **"암호 변경"** 화면 표시
2. **이전 암호** 입력
3. **새 암호** 입력
4. **새 암호 확인** 재입력
5. **"암호 변경 확인"** 클릭

### Step 4: 로그인 확인

1. AWS Management Console 메인 화면 표시
2. 우측 상단에 **"admin-user @ [계정ID]"** 표시 확인
3. 이제 IAM 사용자로 로그인된 상태입니다!

---

## 3️⃣ IAM 사용자 MFA 활성화 (권장)

IAM 사용자에도 MFA를 활성화하여 보안을 강화하세요.

### Step 1: IAM 대시보드 접속

1. 상단 검색창에 **"IAM"** 입력
2. **IAM** 서비스 선택

### Step 2: 본인 사용자 선택

1. 좌측 메뉴에서 **"사용자"** 클릭
2. **"admin-user"** (본인 사용자 이름) 클릭

### Step 3: MFA 디바이스 할당

1. **"보안 자격 증명"** 탭 클릭
2. **"멀티 팩터 인증(MFA)"** 섹션에서:
   - **"MFA 디바이스 할당"** 버튼 클릭

3. **디바이스 이름** 입력: `admin-user-mfa`

4. **MFA 디바이스 선택**:
   - ✅ **"인증 관리자 앱"** 선택

5. **"다음"** 클릭

### Step 4: 인증 앱 설정

1. **Google Authenticator** 또는 다른 인증 앱 열기
2. AWS Console의 **QR 코드** 스캔
3. 인증 앱에 표시된 **6자리 코드** 2개 연속 입력
4. **"MFA 추가"** 클릭

### Step 5: MFA 활성화 확인

1. **"MFA가 성공적으로 할당되었습니다"** 메시지 확인
2. 다음 로그인부터 MFA 코드 입력 필요

---

## 4️⃣ 계정 별칭 설정 (선택사항)

계정 ID 대신 기억하기 쉬운 별칭을 사용할 수 있습니다.

### Step 1: IAM 대시보드 접속

1. IAM 서비스 메인 페이지로 이동
2. 우측 **"AWS 계정"** 섹션 확인

### Step 2: 계정 별칭 생성

1. **"계정 별칭"** 옆의 **"생성"** 버튼 클릭
2. **별칭** 입력:
   - 예: `myaws-learning`
   - 전 세계적으로 고유해야 함
   - 3-63자, 소문자, 숫자, 하이픈만 사용

3. **"별칭 생성"** 클릭

### Step 3: 새 로그인 URL 확인

- 새 로그인 URL: `https://myaws-learning.signin.aws.amazon.com/console`
- 이제 계정 ID 대신 별칭으로 로그인 가능

---

## 5️⃣ 액세스 키 생성 (선택사항)

AWS CLI, SDK, API를 사용하려면 액세스 키가 필요합니다.

> ⚠️ **주의**: 액세스 키는 매우 민감한 정보입니다. 절대 공개 저장소(GitHub 등)에 업로드하지 마세요!

### Step 1: 액세스 키 생성

1. IAM > 사용자 > **"admin-user"** 선택
2. **"보안 자격 증명"** 탭 클릭
3. **"액세스 키"** 섹션에서:
   - **"액세스 키 만들기"** 버튼 클릭

### Step 2: 사용 사례 선택

1. **"Command Line Interface(CLI)"** 선택
2. ✅ **"위의 권장 사항을 이해했으며..."** 체크
3. **"다음"** 클릭

### Step 3: 설명 태그 설정 (선택사항)

1. **설명 태그 값**: `CLI access for learning` 입력
2. **"액세스 키 만들기"** 클릭

### Step 4: 액세스 키 저장

1. **액세스 키 ID** 복사 및 저장
   - 예: `AKIAIOSFODNN7EXAMPLE`

2. **비밀 액세스 키** 복사 및 저장
   - 예: `wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY`
   - ⚠️ **중요**: 이 화면을 벗어나면 다시 확인 불가능!

3. **".csv 파일 다운로드"** 클릭 (권장)
   - 안전한 장소에 보관

4. **"완료"** 클릭

> 💡 **참고**: 액세스 키는 나중에 [AWS CLI 설정](./cli-configuration.md)에서 사용됩니다.

---

## 6️⃣ IAM 보안 베스트 프랙티스

### ✅ 해야 할 것

1. **MFA 활성화**
   - 모든 IAM 사용자에 MFA 설정

2. **최소 권한 원칙**
   - 필요한 권한만 부여
   - 학습 후에는 AdministratorAccess 대신 구체적인 권한 사용

3. **정기적인 권한 검토**
   - 사용하지 않는 권한 제거
   - IAM Access Analyzer 활용

4. **액세스 키 로테이션**
   - 정기적으로 액세스 키 교체 (90일 권장)
   - 사용하지 않는 액세스 키 삭제

5. **강력한 암호 정책**
   - 최소 12자 이상
   - 대소문자, 숫자, 특수문자 조합

### ❌ 하지 말아야 할 것

1. **루트 계정으로 일상 작업**
   - 루트 계정은 계정 관리에만 사용

2. **액세스 키 공유**
   - 각 사용자는 자신의 액세스 키 사용

3. **액세스 키를 코드에 하드코딩**
   - 환경 변수 또는 AWS Secrets Manager 사용

4. **공개 저장소에 자격 증명 업로드**
   - .gitignore에 자격 증명 파일 추가

### 🔐 추가 보안 권장사항

1. **IAM 자격 증명 보고서 정기 확인**
   - IAM > 자격 증명 보고서
   - 사용하지 않는 자격 증명 식별 및 제거

2. **CloudTrail 활성화**
   - 모든 IAM 활동 로깅
   - 보안 감사 및 규정 준수

3. **IAM 정책 시뮬레이터 사용**
   - 정책 테스트 및 검증
   - 의도하지 않은 권한 부여 방지

---

## ✅ 완료 체크리스트

설정이 완료되었는지 확인하세요:

- [ ] 관리자 권한 IAM 사용자 생성 완료
- [ ] IAM 사용자로 로그인 성공
- [ ] IAM 사용자 MFA 활성화 완료 (권장)
- [ ] 계정 별칭 설정 완료 (선택사항)
- [ ] 액세스 키 생성 및 안전하게 저장 (선택사항)
- [ ] 루트 계정 로그아웃 및 IAM 사용자 사용 시작
- [ ] IAM 보안 베스트 프랙티스 숙지

---

## 🔗 다음 단계

IAM 사용자 설정이 완료되었습니다! 이제 다음 단계로 진행하세요:

1. **[AWS CLI 설정](./cli-configuration.md)** (선택사항) - 명령줄 도구 설정
2. **[Console 탐색 가이드](./console-navigation.md)** - AWS Console 기본 사용법
3. **일별 학습 시작** - Day 1부터 AWS 서비스 학습 시작

---

## 📚 참고 자료

- [IAM 사용자 가이드](https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/id_users.html)
- [IAM 모범 사례](https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/best-practices.html)
- [IAM 정책 및 권한](https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/access_policies.html)
- [MFA 설정 가이드](https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/id_credentials_mfa.html)
- [액세스 키 관리](https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/id_credentials_access-keys.html)

---

## ❓ 문제 해결

### IAM 사용자로 로그인할 수 없는 경우

1. **계정 ID 또는 별칭 확인**
   - 올바른 계정 ID 또는 별칭 입력 확인

2. **사용자 이름 확인**
   - 대소문자 구분 확인
   - 공백 없이 정확히 입력

3. **암호 확인**
   - Caps Lock 상태 확인
   - 암호 재설정 필요 시 루트 계정으로 로그인하여 재설정

### MFA 코드가 작동하지 않는 경우

1. **시간 동기화 확인**
   - 스마트폰 시간이 자동 동기화되어 있는지 확인

2. **인증 앱 업데이트**
   - 최신 버전으로 업데이트

3. **MFA 재설정**
   - 루트 계정으로 로그인
   - IAM 사용자의 MFA 디바이스 제거 후 재설정

### 액세스 키를 분실한 경우

1. **새 액세스 키 생성**
   - 기존 액세스 키는 비활성화 또는 삭제
   - 새 액세스 키 생성 및 저장

2. **애플리케이션 업데이트**
   - 새 액세스 키로 모든 애플리케이션 업데이트

---

**마지막 업데이트**: 2024년 1월
