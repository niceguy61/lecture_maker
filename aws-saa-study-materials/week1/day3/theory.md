# Day 3: EC2 (Elastic Compute Cloud) 기초

## 학습 목표
- EC2의 기본 개념과 핵심 기능 이해
- 인스턴스 타입과 선택 기준 학습
- AMI(Amazon Machine Image) 개념 파악
- 보안 그룹과 키 페어 설정 방법 습득
- EC2 인스턴스 생명주기 관리

## 1. EC2란 무엇인가?

Amazon EC2(Elastic Compute Cloud)는 AWS의 핵심 컴퓨팅 서비스입니다. 쉽게 말해서, 클라우드에서 가상 컴퓨터를 빌려 쓸 수 있게 해주는 서비스예요.

### 왜 EC2를 사용할까요?

전통적으로 서버가 필요하면 물리적인 하드웨어를 구매하고, 설치하고, 관리해야 했습니다. 하지만 EC2를 사용하면:

- **즉시 사용 가능**: 몇 분 안에 서버를 시작할 수 있어요
- **유연한 확장**: 필요에 따라 서버 성능을 늘리거나 줄일 수 있어요
- **비용 효율적**: 사용한 만큼만 비용을 지불해요
- **글로벌 배포**: 전 세계 어디든 서버를 배치할 수 있어요

## 2. EC2의 핵심 구성 요소

### 2.1 인스턴스 (Instance)
EC2 인스턴스는 클라우드에서 실행되는 가상 서버입니다. 각 인스턴스는:
- 고유한 인스턴스 ID를 가져요
- 특정 인스턴스 타입으로 정의된 컴퓨팅 리소스를 제공해요
- 운영체제와 애플리케이션을 실행할 수 있어요

### 2.2 AMI (Amazon Machine Image)
AMI는 인스턴스를 시작하는 데 필요한 정보를 담고 있는 템플릿입니다:
- **운영체제**: Linux, Windows 등
- **애플리케이션 서버**: 웹 서버, 데이터베이스 등
- **애플리케이션**: 미리 설치된 소프트웨어
- **설정**: 시스템 구성 정보

AMI 종류:
- **AWS 제공 AMI**: Amazon Linux, Ubuntu, Windows Server 등
- **AWS Marketplace AMI**: 서드파티에서 제공하는 AMI
- **커뮤니티 AMI**: 다른 사용자가 공유한 AMI
- **사용자 정의 AMI**: 직접 만든 AMI

### 2.3 인스턴스 타입
인스턴스 타입은 인스턴스의 하드웨어 사양을 정의합니다. 각 타입은 특정 용도에 최적화되어 있어요.

#### 주요 인스턴스 패밀리:

**범용 (General Purpose)**
- **t3, t4g**: 버스트 가능한 성능, 웹 서버나 소규모 애플리케이션에 적합
- **m5, m6i**: 균형 잡힌 컴퓨팅, 메모리, 네트워킹 리소스

**컴퓨팅 최적화 (Compute Optimized)**
- **c5, c6i**: 고성능 프로세서, CPU 집약적 애플리케이션에 적합

**메모리 최적화 (Memory Optimized)**
- **r5, r6i**: 대용량 메모리, 인메모리 데이터베이스에 적합
- **x1e**: 초대용량 메모리, 빅데이터 처리에 적합

**스토리지 최적화 (Storage Optimized)**
- **i3, i4i**: 고속 SSD, 고성능 데이터베이스에 적합

#### 인스턴스 타입 명명 규칙:
`m5.large`를 예로 들면:
- `m`: 인스턴스 패밀리 (범용)
- `5`: 세대 (5세대)
- `large`: 크기 (nano < micro < small < medium < large < xlarge < 2xlarge...)

## 3. 보안 그룹 (Security Groups)

보안 그룹은 EC2 인스턴스의 가상 방화벽 역할을 합니다.

### 주요 특징:
- **상태 저장 (Stateful)**: 인바운드 규칙을 허용하면 응답 트래픽은 자동으로 허용
- **기본 거부**: 명시적으로 허용하지 않은 모든 트래픽은 차단
- **다중 적용**: 하나의 인스턴스에 여러 보안 그룹 적용 가능

### 규칙 구성:
- **타입**: HTTP, HTTPS, SSH, RDP 등
- **프로토콜**: TCP, UDP, ICMP
- **포트 범위**: 특정 포트 또는 포트 범위
- **소스**: IP 주소, CIDR 블록, 다른 보안 그룹

### 일반적인 보안 그룹 설정:
```
웹 서버 보안 그룹:
- HTTP (80): 0.0.0.0/0 (모든 곳에서 접근)
- HTTPS (443): 0.0.0.0/0 (모든 곳에서 접근)
- SSH (22): 관리자 IP만 허용

데이터베이스 보안 그룹:
- MySQL (3306): 웹 서버 보안 그룹에서만 접근
```

## 4. 키 페어 (Key Pairs)

키 페어는 EC2 인스턴스에 안전하게 접속하기 위한 암호화 키입니다.

### 구성:
- **공개 키**: AWS가 인스턴스에 저장
- **개인 키**: 사용자가 다운로드하여 보관

### 사용 방법:
- **Linux**: SSH를 통한 접속
- **Windows**: RDP 패스워드 복호화

### 보안 주의사항:
- 개인 키는 안전한 곳에 보관
- 키를 분실하면 인스턴스 접속 불가
- 정기적인 키 교체 권장

## 5. EC2 인스턴스 생명주기

EC2 인스턴스는 다음과 같은 상태를 가집니다:

### 상태 전환:
1. **Pending**: 인스턴스 시작 중
2. **Running**: 정상 실행 중
3. **Stopping**: 중지 중
4. **Stopped**: 중지됨 (EBS 기반 인스턴스만)
5. **Shutting-down**: 종료 중
6. **Terminated**: 완전 삭제됨

### 주요 작업:
- **Start**: 중지된 인스턴스 시작
- **Stop**: 인스턴스 중지 (데이터 보존)
- **Reboot**: 인스턴스 재시작
- **Terminate**: 인스턴스 완전 삭제

## 6. 스토리지 옵션

### 6.1 인스턴스 스토어 (Instance Store)
- 물리적으로 인스턴스에 연결된 임시 스토리지
- 인스턴스 중지/종료 시 데이터 손실
- 높은 I/O 성능
- 추가 비용 없음

### 6.2 EBS (Elastic Block Store)
- 네트워크를 통해 연결되는 영구 스토리지
- 인스턴스와 독립적으로 존재
- 스냅샷을 통한 백업 가능
- 다양한 볼륨 타입 제공

## 7. 네트워킹

### 7.1 퍼블릭 IP vs 프라이빗 IP
- **퍼블릭 IP**: 인터넷에서 접근 가능한 IP
- **프라이빗 IP**: VPC 내부에서만 사용하는 IP

### 7.2 Elastic IP (EIP)
- 고정 퍼블릭 IP 주소
- 인스턴스 중지/시작 시에도 유지
- 다른 인스턴스로 재할당 가능

## 8. 모니터링과 로깅

### 8.1 CloudWatch 메트릭
기본 제공 메트릭:
- CPU 사용률
- 네트워크 I/O
- 디스크 I/O
- 상태 확인

### 8.2 상태 확인 (Health Checks)
- **시스템 상태 확인**: AWS 인프라 문제
- **인스턴스 상태 확인**: 인스턴스 소프트웨어 문제

## 9. 비용 최적화

### 9.1 인스턴스 구매 옵션
- **온디맨드**: 시간당 고정 요금
- **예약 인스턴스**: 1-3년 약정으로 할인
- **스팟 인스턴스**: 경매 방식으로 최대 90% 할인
- **전용 호스트**: 물리적 서버 전용 사용

### 9.2 비용 절약 팁
- 적절한 인스턴스 타입 선택
- 사용하지 않는 인스턴스 중지
- 예약 인스턴스 활용
- 스팟 인스턴스 고려

## 10. 실습 준비

오늘 실습에서는 다음을 진행할 예정입니다:
1. EC2 인스턴스 생성
2. 보안 그룹 설정
3. 키 페어 생성 및 SSH 접속
4. 기본 웹 서버 설치
5. 인스턴스 모니터링

## 핵심 정리

1. **EC2는 클라우드의 가상 서버**로, 필요에 따라 즉시 생성하고 관리할 수 있습니다.

2. **AMI는 인스턴스의 템플릿**으로, 운영체제와 소프트웨어가 미리 구성되어 있습니다.

3. **인스턴스 타입**은 용도에 따라 선택하며, 범용, 컴퓨팅 최적화, 메모리 최적화 등이 있습니다.

4. **보안 그룹**은 가상 방화벽으로, 인바운드/아웃바운드 트래픽을 제어합니다.

5. **키 페어**는 안전한 인스턴스 접속을 위한 암호화 키입니다.

6. **인스턴스 생명주기**를 이해하여 적절히 관리하면 비용을 절약할 수 있습니다.

## 다음 학습 예고

내일(Day 4)에는 EC2의 고급 기능과 스토리지 옵션에 대해 더 자세히 알아보겠습니다:
- EBS 볼륨 타입과 성능
- 스냅샷과 백업 전략
- 로드 밸런서 기초
- Auto Scaling 개념

---

*"클라우드 컴퓨팅의 핵심은 필요할 때 필요한 만큼 사용하는 것입니다. EC2로 이 철학을 실현해보세요!"*