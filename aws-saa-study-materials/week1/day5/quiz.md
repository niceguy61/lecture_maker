# Day 5 퀴즈: VPC 기초

## 퀴즈 개요
- **주제**: VPC (Virtual Private Cloud) 기초
- **문제 수**: 5문제
- **예상 소요 시간**: 10-15분
- **난이도**: 중급

---

## 문제 1

**AWS VPC에서 CIDR 블록 10.0.0.0/16을 사용할 때, 이론적으로 사용 가능한 총 IP 주소의 개수는 몇 개입니까?**

A) 256개  
B) 4,096개  
C) 65,536개  
D) 16,777,216개

<details>
<summary><strong>정답 및 해설</strong></summary>

**정답: C) 65,536개**

**해설:**
- CIDR 표기법에서 /16은 네트워크 부분이 16비트, 호스트 부분이 16비트임을 의미합니다.
- 호스트 부분 16비트로 표현할 수 있는 주소의 개수: 2^16 = 65,536개
- 10.0.0.0/16은 10.0.0.0부터 10.0.255.255까지의 주소 범위를 포함합니다.
- 실제로는 AWS가 각 서브넷에서 5개의 IP 주소를 예약하므로 사용 가능한 주소는 더 적습니다.

**참고:**
- /24 서브넷: 256개 IP (2^8)
- /20 서브넷: 4,096개 IP (2^12)
- /8 서브넷: 16,777,216개 IP (2^24)
</details>

---

## 문제 2

**다음 중 퍼블릭 서브넷과 프라이빗 서브넷의 주요 차이점을 가장 정확하게 설명한 것은?**

A) 퍼블릭 서브넷은 더 많은 IP 주소를 가지고 있다  
B) 퍼블릭 서브넷은 인터넷 게이트웨이로의 라우트를 가지고 있다  
C) 프라이빗 서브넷은 보안 그룹을 사용할 수 없다  
D) 프라이빗 서브넷은 다른 가용 영역에 위치해야 한다

<details>
<summary><strong>정답 및 해설</strong></summary>

**정답: B) 퍼블릭 서브넷은 인터넷 게이트웨이로의 라우트를 가지고 있다**

**해설:**
- **퍼블릭 서브넷**: 라우팅 테이블에 인터넷 게이트웨이(IGW)로의 라우트(0.0.0.0/0 → IGW)가 있어 인터넷과 직접 통신 가능
- **프라이빗 서브넷**: 인터넷 게이트웨이로의 직접적인 라우트가 없어 인터넷에서 직접 접근 불가능

**오답 분석:**
- A) IP 주소 개수는 CIDR 블록 크기에 따라 결정되며, 퍼블릭/프라이빗 여부와 무관
- C) 프라이빗 서브넷도 보안 그룹 사용 가능
- D) 퍼블릭과 프라이빗 서브넷 모두 같은 가용 영역에 위치할 수 있음

**핵심 개념:**
- 서브넷의 퍼블릭/프라이빗 구분은 라우팅 테이블의 라우트 설정에 의해 결정됩니다.
</details>

---

## 문제 3

**3-tier 웹 애플리케이션을 AWS VPC에 배포할 때, 각 계층을 배치하기에 가장 적절한 서브넷 구성은?**

A) 모든 계층을 퍼블릭 서브넷에 배치  
B) 웹 계층: 퍼블릭, 애플리케이션 계층: 프라이빗, 데이터베이스 계층: 프라이빗  
C) 웹 계층: 프라이빗, 애플리케이션 계층: 퍼블릭, 데이터베이스 계층: 프라이빗  
D) 모든 계층을 프라이빗 서브넷에 배치

<details>
<summary><strong>정답 및 해설</strong></summary>

**정답: B) 웹 계층: 퍼블릭, 애플리케이션 계층: 프라이빗, 데이터베이스 계층: 프라이빗**

**해설:**
이는 보안 모범 사례를 따른 3-tier 아키텍처 구성입니다:

**웹 계층 (퍼블릭 서브넷):**
- 사용자의 직접적인 접근이 필요
- 로드 밸런서, 웹 서버 등이 위치
- 인터넷에서 HTTP/HTTPS 트래픽을 받아야 함

**애플리케이션 계층 (프라이빗 서브넷):**
- 비즈니스 로직 처리
- 웹 계층에서만 접근 가능하도록 제한
- 외부에서 직접 접근할 필요 없음

**데이터베이스 계층 (프라이빗 서브넷):**
- 민감한 데이터 저장
- 애플리케이션 계층에서만 접근 가능
- 최고 수준의 보안 필요

**보안 원칙:**
- 최소 권한 원칙 적용
- 계층별 접근 제어
- 심층 방어(Defense in Depth) 구현
</details>

---

## 문제 4

**보안 그룹(Security Group)과 네트워크 ACL(NACL)에 대한 설명 중 올바른 것은?**

A) 보안 그룹은 상태 비저장(Stateless)이고, NACL은 상태 저장(Stateful)이다  
B) 보안 그룹은 서브넷 레벨에서 작동하고, NACL은 인스턴스 레벨에서 작동한다  
C) 보안 그룹은 허용 규칙만 설정할 수 있고, NACL은 허용과 거부 규칙을 모두 설정할 수 있다  
D) 보안 그룹과 NACL 모두 기본적으로 모든 트래픽을 허용한다

<details>
<summary><strong>정답 및 해설</strong></summary>

**정답: C) 보안 그룹은 허용 규칙만 설정할 수 있고, NACL은 허용과 거부 규칙을 모두 설정할 수 있다**

**해설:**

**보안 그룹 (Security Group):**
- **상태 저장(Stateful)**: 아웃바운드 응답 트래픽 자동 허용
- **인스턴스 레벨**: 각 EC2 인스턴스에 적용
- **허용 규칙만**: ALLOW 규칙만 설정 가능, 명시적 DENY 없음
- **기본 정책**: 모든 인바운드 거부, 모든 아웃바운드 허용

**네트워크 ACL (NACL):**
- **상태 비저장(Stateless)**: 인바운드/아웃바운드 별도 규칙 필요
- **서브넷 레벨**: 서브넷 전체에 적용
- **허용/거부 규칙**: ALLOW와 DENY 규칙 모두 설정 가능
- **기본 정책**: 기본 NACL은 모든 트래픽 허용, 사용자 생성 NACL은 모든 트래픽 거부

**다층 보안:**
보안 그룹과 NACL을 함께 사용하여 심층 방어 구현
</details>

---

## 문제 5

**다음 시나리오에서 VPC 설계 시 고려해야 할 가장 중요한 요소는 무엇입니까?**

**시나리오:** 
온라인 쇼핑몰을 운영하는 회사가 AWS로 마이그레이션을 계획하고 있습니다. 현재 온프레미스 환경에서 192.168.0.0/16 네트워크를 사용하고 있으며, 향후 VPN을 통해 하이브리드 클라우드 환경을 구축할 예정입니다. 또한 트래픽이 급증하는 이벤트 기간에 대비해 확장 가능한 아키텍처가 필요합니다.

A) 가장 큰 CIDR 블록(/8)을 사용하여 최대한 많은 IP 주소 확보  
B) 온프레미스와 겹치지 않는 IP 대역 선택 및 다중 가용 영역 설계  
C) 모든 리소스를 하나의 가용 영역에 집중하여 지연 시간 최소화  
D) 퍼블릭 서브넷만 사용하여 관리 복잡성 감소

<details>
<summary><strong>정답 및 해설</strong></summary>

**정답: B) 온프레미스와 겹치지 않는 IP 대역 선택 및 다중 가용 영역 설계**

**해설:**

**핵심 고려사항 분석:**

1. **IP 대역 충돌 방지:**
   - 온프레미스: 192.168.0.0/16 사용 중
   - VPC에서는 10.0.0.0/16 또는 172.16.0.0/16 등 다른 대역 사용 필요
   - VPN 연결 시 라우팅 충돌 방지

2. **고가용성 설계:**
   - 다중 가용 영역(Multi-AZ) 배치로 장애 대응
   - 트래픽 급증 시 Auto Scaling 지원
   - 로드 밸런서를 통한 트래픽 분산

3. **확장성 고려:**
   - 적절한 CIDR 블록 크기 선택 (너무 크지도 작지도 않게)
   - 서브넷 설계 시 미래 확장 고려

**오답 분석:**
- A) /8은 과도하게 큰 주소 공간, 관리 복잡성 증가
- C) 단일 AZ는 고가용성 위배, 장애 시 전체 서비스 중단 위험
- D) 퍼블릭 서브넷만 사용 시 보안 위험 증가

**모범 사례:**
- VPC CIDR: 10.0.0.0/16 (온프레미스와 분리)
- 최소 2개 AZ에 퍼블릭/프라이빗 서브넷 배치
- 계층별 보안 그룹 설정
</details>

---

## 퀴즈 완료

### 점수 계산
- 각 문제당 20점 (총 100점)
- 80점 이상: 우수
- 60점 이상: 보통
- 60점 미만: 복습 필요

### 복습이 필요한 경우
점수가 낮다면 다음 내용을 다시 학습하세요:

1. **CIDR 표기법과 IP 주소 계산**
   - 서브넷 마스크와 호스트 비트 이해
   - 2의 거듭제곱 계산

2. **퍼블릭/프라이빗 서브넷 개념**
   - 라우팅 테이블의 역할
   - 인터넷 게이트웨이 연결

3. **3-tier 아키텍처 보안 설계**
   - 계층별 접근 제어
   - 최소 권한 원칙

4. **보안 그룹 vs 네트워크 ACL**
   - Stateful vs Stateless
   - 적용 범위와 규칙 차이

5. **VPC 설계 모범 사례**
   - IP 대역 계획
   - 고가용성 설계
   - 하이브리드 클라우드 고려사항

### 다음 단계
내일(Day 6)에는 VPC 고급 네트워킹 기능을 학습합니다:
- NAT Gateway와 NAT Instance
- VPC Endpoint
- VPC Peering
- VPN Gateway

---

## 추가 학습 자료

- [AWS VPC FAQ](https://aws.amazon.com/vpc/faqs/)
- [VPC 보안 모범 사례](https://docs.aws.amazon.com/vpc/latest/userguide/vpc-security-best-practices.html)
- [서브넷 CIDR 계산기](https://www.subnet-calculator.com/)

**수고하셨습니다! 🎉**